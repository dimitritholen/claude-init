{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Write|Edit",
        "description": "Auto-format and verify TypeScript after edits",
        "hooks": [
          {
            "type": "command",
            "command": "npx prettier --write $FILE && npx tsc --noEmit $FILE || echo 'TypeScript check failed - fix errors!'"
          }
        ]
      },
      {
        "matcher": "Write:*.test.ts|Edit:*.test.ts",
        "description": "Verify test includes real integration tests",
        "hooks": [
          {
            "type": "command",
            "command": "grep -q 'mock\\|Mock\\|stub\\|Stub' $FILE && echo 'âš ï¸  WARNING: Detected mocks - ensure real integration tests exist!' || echo 'âœ… No mocks detected'"
          }
        ]
      }
    ],
    "Stop": [
      {
        "description": "Run REAL tests (not mocks) and verify results after task completion",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'ğŸ§ª Running REAL tests...' && npm test 2>&1 | tee test-output.log && echo 'ğŸ“Š Analyzing test results...' && grep -i 'mock\\|stub' test-output.log && echo 'âš ï¸  WARNING: Mock-based tests detected - HIGH RISK!' || echo 'âœ… Tests appear to use real implementations'"
          }
        ]
      },
      {
        "description": "Verify build and check for over-engineering",
        "hooks": [
          {
            "type": "command",
            "command": "npm run build && echo 'ğŸ” Checking for over-engineering...' && find src -name '*.ts' -exec wc -l {} + | sort -nr | head -10 && echo 'âš ï¸  Files above 200 lines may be over-engineered'"
          }
        ]
      }
    ]
  }
}